<!DOCTYPE html>
<html lang="pt-br"><head>
  <head>
  <script type="module" src="./auth.js"></script>
  <script type="module" src="./nav-update.js"></script>
</head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Carrinho de Compras</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<script id="tailwind-config">
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              "primary": "#f97306",
              "background-light": "#f8f7f5",
              "background-dark": "#23180f",
            },
            fontFamily: {
              "display": ["Plus Jakarta Sans"]
            },
            borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px"},
          },
        },
      }
    </script>
<style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
  </head>
<body class="bg-background-light dark:bg-background-dark font-display text-zinc-900 dark:text-zinc-100">
<div class="relative flex h-auto min-h-screen w-full flex-col justify-between">
<div class="flex-grow">
<header class="sticky top-0 z-10 flex items-center justify-between bg-background-light/80 p-4 backdrop-blur-sm dark:bg-background-dark/80">
<button onclick="window.location.href='index.html'" class="text-zinc-600 dark:text-zinc-400">
  <span class="material-symbols-outlined">arrow_back</span>
</button>
<h1 class="flex-1 text-center text-lg font-bold">Carrinho</h1>
<div class="w-10"></div>
</header>
<main class="p-4">
<!-- Container dos itens do carrinho -->
<div id="carrinho-items" class="space-y-4">
  <!-- Itens serão inseridos aqui dinamicamente -->
  <div class="text-center py-8">
    <p class="text-zinc-500 dark:text-zinc-400">Carregando...</p>
  </div>
</div>

<!-- Resumo do pedido -->
<!-- Seleção de Horário -->
<div class="mt-6 rounded-lg bg-zinc-100/50 p-4 dark:bg-zinc-800/20">
  <label for="horario-retirada" class="block text-sm font-semibold mb-2">
    Horário de Retirada <span class="text-red-500">*</span>
  </label>
  <select id="horario-retirada" class="w-full px-4 py-2 rounded-lg border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:ring-2 focus:ring-primary focus:border-transparent">
    <option value="">Selecione o horário</option>
  </select>
  <p class="text-xs text-zinc-500 dark:text-zinc-400 mt-2">
    Horários disponíveis: 11:50 às 14:00
  </p>
</div>

<!-- Resumo do pedido -->
<div id="resumo-pedido" class="mt-6 rounded-lg bg-zinc-100/50 p-4 dark:bg-zinc-800/20">
  <h3 class="text-lg font-bold mb-4">Resumo do Pedido</h3>
  <div class="space-y-2 text-zinc-600 dark:text-zinc-400">
    <div class="flex justify-between">
      <span>Subtotal</span>
      <span id="subtotal" class="text-zinc-900 dark:text-zinc-100">R$ 0,00</span>
    </div>
    <hr class="my-2 border-zinc-200 dark:border-zinc-700"/>
    <div class="flex justify-between font-bold text-zinc-900 dark:text-zinc-100 text-lg">
      <span>Total</span>
      <span id="total">R$ 0,00</span>
    </div>
  </div>
</div>
</main>
</div>
<footer class="sticky bottom-0 bg-background-light pt-3 dark:bg-background-dark">
<div class="px-4">
<button id="finalizar-pedido" class="w-full h-12 rounded-lg bg-primary text-white font-bold text-lg hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
  Finalizar Pedido
</button>
</div>
<nav class="mt-3 flex justify-around border-t border-zinc-200 bg-background-light py-2 dark:border-zinc-700 dark:bg-background-dark">
<a class="flex flex-col items-center gap-1 text-zinc-500 dark:text-zinc-400" href="index.html">
<span class="material-symbols-outlined"> restaurant_menu </span>
<span class="text-xs">Cardápio</span>
</a>
<a class="flex flex-col items-center gap-1 text-primary" href="carrinho.html">
<span class="material-symbols-outlined"> shopping_cart </span>
<span class="text-xs font-bold">Carrinho</span>
</a>
<a class="flex flex-col items-center gap-1 text-zinc-500 dark:text-zinc-400" href="pedidos.html">
<span class="material-symbols-outlined"> receipt_long </span>
<span class="text-xs">Pedidos</span>
</a>
<a class="flex flex-col items-center gap-1 text-zinc-500 dark:text-zinc-400" href="login.html">
<span class="material-symbols-outlined"> person </span>
<span class="text-xs">Perfil</span>
</a>
</nav>
</footer>
</div>

<!-- Script do carrinho -->
<script type="module" src="./carrinho.js"></script>
<!-- Adicione ANTES do </body> no carrinho.html -->
<script>
// Atualiza link do perfil baseado no login
document.addEventListener('DOMContentLoaded', function() {
    const linkPerfil = document.querySelector('nav a[href="login.html"]');
    
    if (linkPerfil && window.auth && auth.estaLogado()) {
        linkPerfil.href = 'perfil.html';
        linkPerfil.classList.remove('text-zinc-500', 'dark:text-zinc-400');
        linkPerfil.classList.add('text-primary');
    }
});
</script>
</body></html>